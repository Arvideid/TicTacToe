<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe AI Arena</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Tic-Tac-Toe AI Arena</h1>
        </header>
        
        <main class="game-container">
            <div class="left-panel">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="game-settings">Game Settings</button>
                    <button class="tab-btn" data-tab="learning-params">Q-Learning</button>
                </div>

                <div class="tab-content active" id="game-settings">
                    <div class="player-selection">
                        <div class="form-group">
                            <label for="player-x">Player X (First):</label>
                            <select id="player-x">
                                <option value="human">Human</option>
                                <option value="random">Random AI</option>
                                <option value="perfect">Perfect AI</option>
                                <option value="learning">Learning AI</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="player-o">Player O (Second):</label>
                            <select id="player-o">
                                <option value="learning">Learning AI</option>
                                <option value="human">Human</option>
                                <option value="random">Random AI</option>
                                <option value="perfect">Perfect AI</option>
                            </select>
                        </div>
                    </div>

                    <div class="game-controls">
                        <div class="form-group">
                            <label for="num-games">Number of Games:</label>
                            <input type="number" id="num-games" value="100" min="1" max="1000">
                        </div>
                        <div class="form-group">
                            <label for="move-delay">Move Delay (ms):</label>
                            <input type="number" id="move-delay" value="500" min="0" max="5000">
                        </div>
                    </div>

                    <div class="button-group">
                        <button id="start-match" class="btn primary">Start Match</button>
                        <button id="stop-match" class="btn secondary" disabled>Stop Match</button>
                    </div>
                </div>

                <div class="tab-content" id="learning-params">
                    <div class="form-group">
                        <label for="learning-rate">Learning Rate (α):</label>
                        <input type="number" id="learning-rate" value="0.4" step="0.1" min="0" max="1">
                    </div>
                    <div class="form-group">
                        <label for="discount-factor">Discount Factor (γ):</label>
                        <input type="number" id="discount-factor" value="0.95" step="0.01" min="0" max="1">
                    </div>
                    <div class="form-group">
                        <label for="initial-epsilon">Initial Epsilon:</label>
                        <input type="number" id="initial-epsilon" value="0.9" step="0.1" min="0" max="1">
                    </div>
                    <div class="form-group">
                        <label for="min-epsilon">Minimum Epsilon:</label>
                        <input type="number" id="min-epsilon" value="0.05" step="0.01" min="0" max="1">
                    </div>
                    <div class="form-group">
                        <label for="epsilon-decay">Epsilon Decay Rate:</label>
                        <input type="number" id="epsilon-decay" value="0.997" step="0.001" min="0" max="1">
                    </div>
                </div>

                <div class="performance-charts">
                    <h2>Performance</h2>
                    <canvas id="win-rate-chart"></canvas>
                    <canvas id="non-loss-rate-chart"></canvas>
                </div>

                <div class="match-history">
                    <h2>Match History</h2>
                    <div id="history-log" class="history-container"></div>
                </div>
            </div>

            <div class="center-panel">
                <div class="game-board-container">
                    <div class="game-board">
                        <div class="cell" data-row="0" data-col="0"></div>
                        <div class="cell" data-row="0" data-col="1"></div>
                        <div class="cell" data-row="0" data-col="2"></div>
                        <div class="cell" data-row="1" data-col="0"></div>
                        <div class="cell" data-row="1" data-col="1"></div>
                        <div class="cell" data-row="1" data-col="2"></div>
                        <div class="cell" data-row="2" data-col="0"></div>
                        <div class="cell" data-row="2" data-col="1"></div>
                        <div class="cell" data-row="2" data-col="2"></div>
                    </div>
                    <div class="game-status">
                        <p id="status-text">Game ready to start</p>
                    </div>
                </div>

                <div class="current-stats">
                    <div class="stats-grid">
                        <div class="stat-item">
                            <label>X Wins:</label>
                            <span id="x-wins">0</span>
                        </div>
                        <div class="stat-item">
                            <label>O Wins:</label>
                            <span id="o-wins">0</span>
                        </div>
                        <div class="stat-item">
                            <label>Ties:</label>
                            <span id="ties">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="right-panel">
            </div>
        </main>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/game.js') }}"></script>
</body>
</html>